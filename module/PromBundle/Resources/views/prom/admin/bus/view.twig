{% extends 'admin/base.twig' %}

{% block content %}

	{% include 'prom/admin/partials/navigation.twig' %}

	{% include 'admin/partials/flashMessenger.twig' %}

	<div id="controller_action">
        <table>
            <tr>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Email</th>
                <th width="70px">Code</th>
                <th width="50px">Actions</th>
            </tr>

            {% for passenger in passengers %}
                <tr>
                    <td>{{ passenger.getFirstName() }}</td>
                    <td>{{ passenger.getLastName() }}</td>
                    <td>{{ passenger.getEmail() }}</td>
                    <td>{{ passenger.getCode().getCode() }}</td>
                    <td class="actions">
                        {% if hasAccess('prom_admin_bus', 'view') %}
                            <a href="{{ url('prom_admin_bus', {"action": "view", "id": code.getId()}) }}" class="view">View</a>
                        {% endif %}
                        {% if hasAccess('prom_admin_bus', 'edit') %}
                            <a href="{{ url('prom_admin_bus', {"action": "edit", "id": code.getId()}) }}" class="edit">Edit</a>
                        {% endif %}
                        {% if hasAccess('prom_admin_bus', 'delete') %}
                            <a href="{{ url('prom_admin_bus', {"action": "expire", "id": code.getId()}) }}" class="delete">Expire</a>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>

        {% include 'admin/partials/paginationControl.twig' %}
    </div>

    <aside>
        {% if hasAccess('prom_admin_bus', 'add') %}
            <div class="sidebox">
                <div class="title">New code(s)</div>
                <div class="content">
                    <p>
                        <i>Please hit the link below to add additional buses!</i>
                    </p>
                    <p>
                        <a href="{{ url('prom_admin_bus', {'action': 'add'}) }}">&rarr; Add Buses</a>
                    </p>
                </div>
            </div>
        {% endif %}
    </aside>
{% endblock %}
