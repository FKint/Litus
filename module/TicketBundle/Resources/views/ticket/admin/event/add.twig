{% extends 'admin/base.twig' %}

{% block content %}
    {% include 'ticket/admin/event/partials/navigation.twig' %}

    {% include 'admin/partials/flashMessenger.twig' %}

    <div id="controller_action">
        {% import 'admin/partials/form.twig' as forms %}
        {{ forms.renderForm(form) }}
    </div>
{% endblock %}

{% block content_script %}
    <script type="text/javascript">
        var currentCount = 1;
        $(document).ready(function () {
            $('input[name="options[' + (currentCount - 1) + '][option]"]').keyup(add_option);
        });

        function add_option() {
            if ($(this).val().length > 0) {
                $(this).unbind('keyup');
                var template = $('#data-template').data('template');
                template = template.replace(/__index__/g, currentCount);
                currentCount++;

                $('form > fieldset').append(template);
                $('input[name="options[' + (currentCount - 1) + '][option]"]').keyup(add_option);
            }
        }
    </script>
{% endblock %}